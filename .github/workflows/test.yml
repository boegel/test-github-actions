name: test
on:
  issue_comment:
    types: [created]
  pull_request:
    types: [labeled]
jobs:
  react-to-comment:
    runs-on: ubuntu-latest
    steps:
    - name: install dependencies
      run: |
        pip install PyGithub
        pip install git+https://github.com/boegel/py-github-actions.git
    - name: react to comment
      shell: python
      env:
        GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
      run: |
        import actions, os
        
        # collect event data
        from actions import get_event_data
        event_data = actions.get_event_data(verbose=True)
        
        if actions.get_event_trigger().startswith('issue_comment.'):
            # print comment body
            print(event_data['comment']['body'])
        
            # reply to comment
            token = os.environ['GITHUB_TOKEN']
            from github import Github
            g = Github(token)
        
            repo_owner = event_data['repository']['owner']['login']
            repo_name = event_data['repository']['name']
            repo = g.get_repo(repo_owner + '/' + repo_name)
        
            issue = repo.get_issue(number=event_data['issue']['number'])
            issue.create_comment("Thank you for your comment @%s!" % event_data['sender']['login'])
